<h2 class="mb-3">Korisnici</h2>

<div *ngIf="!canRead" class="alert alert-warning">
  Nemate dozvolu za prikaz korisnika.
</div>

<div *ngIf="canRead" class="table-responsive">
  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
    <tr>
      <th>#</th>
      <th>Ime</th>
      <th>Prezime</th>
      <th>Email</th>
      <th>Aktivan</th>
      <th>Dozvole</th>
      <th *ngIf="canDelete || canUpdate" style="width: 160px;">Akcije</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let u of users; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{ u.firstName }}</td>
      <td>{{ u.lastName }}</td>
      <td>{{ u.email }}</td>
      <td>
        <span class="badge" [ngClass]="u.active ? 'bg-success' : 'bg-secondary'">
          {{ u.active ? 'DA' : 'NE' }}
        </span>
      </td>
      <td>
        <ng-container *ngIf="u.permissions?.length; else noPerms">
          <span *ngFor="let p of u.permissions" class="badge bg-primary me-1 mb-1">{{ p }}</span>
        </ng-container>
        <ng-template #noPerms><span class="text-muted">â€”</span></ng-template>
      </td>
      <td *ngIf="canUpdate || canDelete">
        <div class="btn-group">
          <button *ngIf="canUpdate" class="btn btn-sm btn-outline-primary" (click)="onEdit(u)">Uredi</button>
          <button *ngIf="canDelete" class="btn btn-sm btn-outline-danger" (click)="onDelete(u)">Obrisi</button>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>
